---
layout: post
title: HashMap工作原理
date: 2018-05-09
categories: collection
tags: [hashMap]
description: HashMap工作原理
---

**简介**<br/>
Map接口常见的四个实现类：<br/>
1. HashMap：线程非安全，多个线程同时写HashMap时可能会存在数据一致性问题；插入及遍历数据无序；
如果要满足线程安全，可以使用Collections的synchronizedMap或者使用ConcurrentHashMap;
根据键的hashCode存储值，HashMap只允许一条记录的键为null，允许多条记录的值为null；
2. HashTable：线程安全类，任一时间只能有一个线程能写HashTable；并发性不如ConcurrentHashMap
（ConcurrentHashMap引入了分段锁），HashTable一般不建议使用，单线程中使用HashMap，多线程中使用ConcurrentHashMap
3. LinkedHashMap：HashMap的一个子类，保证了数据插入的有序性，使用迭代方式遍历时，先得到的值肯定是先插入的
4. TreeMap：TreeMap实现了SortedMap接口，能够将它保存的记录按键（ASCII）排序，默认是按键升序排序，
也可以指定排序的比较器

```html
public void test14() {
        //逆序比较器
        Map<String, Object> m = new TreeMap(new Comparator<String>() {
            @Override
            public int compare(String o1, String o2) {
                return o2.compareTo(o1);
            }
        });
        m.put("4", 4);
        m.put("2", 2);
        m.put("5", 5);
        m.put("3", 3);
        for(Object key: m.keySet()) {
            System.out.println(m.get(key));
        }
    }
```

**HashMap内部结构**



