---
layout: post
title: MySQL开发常见问题
date: 2018-03-16
categories: 关系型数据库
tags: [MySQL]
description: MySQL常用知识了解。
---

**创建表模板**
```$xslt
CREATE TABLE `warn_condition_statistics` (
    `id` int(11) NOT NULL AUTO_INCREMENT COMMENT '主键',
    `statistics_properties` text DEFAULT NULL COMMENT '条件单数据统计',
    `version` int(10) NOT NULL COMMENT '版本号',
    `created_date` timestamp DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    PRIMARY KEY (`id`)
    ) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;
```

**日期类型之间的比较**

|sql字段类型|bytes|格式|范围|
|---|---|---|---|
|date|3|YYYY-MM-DD|1000-01-01 ~ 9999-12-31|
|year|1|YYYY|1901 ~ 2155|
|datetime|8|YYYY-MM-DD HH:mm:SS|1000-01-01 00:00:00 ~ 9999-12-31 23:59:59|
|timestamp|4|YYYY-MM-DD HH:mm:SS|1970-01-01 00:00:01 ~ 2038|
|time|3|HH:MM:SS|-838:59:59 ~ 838:59:59|

|Java类型|格式|
|---|---|
|java.util.Date|年月日时分秒|
|java.sql.Date|年月日|
|java.sql.Time|时分秒|
|java.util.Timestamp|年月日时分秒纳秒|

**常用sql语句**
- group by语句：使用场景：一般与[count(),sum(),max(),min(),avg()]合计函数联合使用.
- having语句：having语句相当于where，只是where后面通常不能与合计函数联合使用，having通常与group by联合使用，后面的的过滤条件一般为合计函数。

```
模糊查询：%为通配符，表示任意长度的字符：
select * from t_user where user_name like '张%';

_为通配符，表示一个字符长度的任意字符：
select * from t_user where user_name like '张_';

distinct关键字：去掉重复记录
select distinct user_name from t_user;

limit关键字：
select * from t_user limit 5,10;//第一个参数5表示从第五行数据开始检索，10表示查询十条数据，即查询6-15条记录
select  * from t_user limit 10;==select * from t_user limit 0,10;

is null/is not null
select * from t_user where salary is [not] null;

in()/not in()
select * from t_user where user_name [not] in('张三','李四');
```

**按日期查询记录**
```
今日：
select * from warn_condition_strategy where to_days(created_date) = to_days(now());

近七天：
select * from warn_condition_strategy where date_sub(curdate(), interval 1 week) <= date(created_date);

近一个月：
select * from warn_condition_strategy where date_sub(curdate(), interval 1 month) <= date(created_date);

近三个月
select * from warn_condition_strategy where date_sub(curdate(), interval 3 month) <= date(created_date);

近一年
select * from warn_condition_strategy where date_sub(curdate(), interval 1 year) <= date(created_date);

本月：
select * from warn_condition_strategy where date_format(created_date, '%Y%m') = date_format(curdate(), '%Y%m');
```