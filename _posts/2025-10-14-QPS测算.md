---
layout: post
title: QPS测算
date: 2025-10-14
tags: [concurrency]
---

1. 统计系统每天的平均流量
   > 我们通过 ELK 分析 Nginx 日志，统计出系统每天的总请求量约为 800 万。其中，每天放款成功约 1 万笔左右，还有加上还款等业务
2. 800w的流量需要多少QPS支撑
   > 800w的流量中大约有600w的流量集中在8h，因此QPS = 6000000/8/3600 = 208。
   > 考虑到流量峰值我们按 2 倍估算，QPS = 208 * 2 = 416
   > 还需要预留1.5倍冗余用于应对突发流量，QPS = 416 * 1.5 = 624
3. 需要几台机器支撑600的QPS
   > 假设每台机器（4C8G）工作线程数为 100，接口平均响应时间 ≤500ms，单机 QPS ≈ 200。 
   > 因此，至少需要 3 台机器来支撑 600 的 QPS，同时也满足了高可用需求。





